<!DOCTYPE html>
<meta charset="utf-8">
<title>Streamgraph</title>
<style>

body {
  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
  margin: auto;
  position: relative;
  width: 960px;
}

button {
  position: absolute;
  right: 10px;
  top: 10px;
}

</style>
<div id="chart"/>
<button onclick="transition()">Update</button>
<script src="http://d3js.org/d3.v3.min.js"></script>
<script>

var layers = [
  {
    "name": "apples",
    "values": [
      { "x": 0, "y":  91},
      { "x": 1, "y": 290},
      { "x": 2, "y": 290},
      { "x": 3, "y": 80}
    ]
  },
  {  
    "name": "oranges",
    "values": [
      { "x": 0, "y":  90},
      { "x": 1, "y": 49},
      { "x": 2, "y": 80},
      { "x": 3, "y": 80}
    ]
  }
];

var     m = 4; // number of samples per layer
var width = 960,
    height = 500,
    mx = m - 1,
    my = 350;

var erik = [];

d3.csv("../average_time/part-00000", function(data){
    // build the list of city names
    data.forEach( function (d) {
        erik.push(d);
    });

/*
    d3.layout.cloud().size([500, 500])
        .words(cityData.map(function(d) {
            return {text: d, size: 10 + Math.random() * 90};
        }))
        .rotate(function() { return ~~(Math.random() * 2) * 90; })
        .font("Impact")
        .fontSize(function(d) { return d.size; })
        .on("end", draw)
        .start();
        */
        var stack = d3.layout.stack()
          .offset("wiggle")
          .values(function(d) { return d.values; });

        var area = d3.svg.area()
        .x(function(d) { 
            return d.x * width / mx; 
        })
        .y0(function(d) { 
            return height - d.y0 * height / my; 
        })
        .y1(function(d) { 
            return height - (d.y + d.y0) * height / my; 
        });

      var vis = d3.select("#chart")
        .append("svg")
          .attr("width", width)
          .attr("height", height);

      vis.selectAll("path")
          .data(stack(erik))
        .enter().append("path")
          .attr("d", function(d) { return area(d.values); }) //area)
        .append("title")
          .text(function(d) { return d.name; });
      });
/*
      vis.selectAll("path")
          .data(stack(layers))
        .enter().append("path")
          .attr("d", function(d) { return area(d.values); }) //area)
        .append("title")
          .text(function(d) { return d.name; });
      });
*/


</script>